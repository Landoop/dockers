language: generic
services:
- docker
env:
  global:
  - SR_VERSION=1.2.7 LENSES_CLI_VERSION=3.1.0 CONFLUENT_VERSION=5.1.0 KAFKA_VERSION=2.1.0
  - secure: fvxaixkKeutAIiUD0YDnwa0BqmC7tQ/zX3GWuVWBc/QswcIhm2jpLwOKZgm5zU4iX+wn84xXc7+gNvCvg4/O/gQ3qakqclnAuIuWeARkt1T60e6p6/Vf7jSj9X0R/OYiMWmDC21BWX+vflArHSnYYHy3m/3KC79/W6OnirWQqw1DkKamJU+0oKX94ix9kjI1XAt2deHk+rVS2v+lFoN+qWY6eBWTQWiz11S1pCoYhRlTFcRk1AIpxkAwLRu3El8nvnR8hUsuzkanX8ZXZFfVYk79J2VrLxHl06JoiQFX+Uq6/jc6cZZQghgGToJR5+UO2P4l2Blu6HWm+WVI0XcdLg5ACrlem/fW/K8+cfx620CgORECWc3+Xe9Stp4dHHN/7Nc4CY/KW3n5VT/p71fnLe4kMtim9cJ4kR28GbQMuoTXU0I0T7U+kl1QzhKpqI0iBAoiYVaeFN2UstDC6sm+94MMIJk9SBQ69EzBYgoZUXFgHhlleojKA84SYwofPZ3/3ZH7c0DrI3jk10n/O5AqRoqHrgdvTet51eNGXArV3Ii68lDQos3PDZ1vIsIWPmuLbRvVNa9vqwHSpqp+YIbDUdLK2/p4HONKaKuUQ031q2grutAQL3KF0R52WZSGFnGQA/wZlSRPjhTqB56jSgW64RwpcmzC8Gd6Ff/6Le6btfM=
  - secure: ia3Hr9Ny36EPD7YRyXtyexIUbDGn1zbbQolQTwZiWA3+yjDGKtc7rSUwlBF60WqybmRKFtvqFXTzWqzRjwHiTtP0+tr1aUzPMzMScd4cMWpevawPenE0os6Fgk+HDhdkRmG9C/TPwfDQ/UqXLVnB/AL3ZFAa+icxEp0RPIr4ffIMdK2R7w37VOAugLIZA3okicBSQl3OJHZ0MV4sM3gsmbCZ8P4YMELcXna6Ttm2aDv92xDAaeRJQTM0gk67GfTyiDDPy0OK8gOcaVDL1B2/FhBXaD0aceD3G8gJXyHhd+csBXgoDvARbfsXVt1WQ39+y/vMNsGxuuKlZVHTQa+XeeypHQbd29OaH+CzOwY8KuJ3XAd2gT/Tmm8LXahRct03umMgrY2ZvGEWml4fJLVI0ER0JZvgQ0mzsqvfGh60iRo601u/iFxQrWRJFSz2MNBn0aqx9dy3Qpcbi8v7IYRhs6wgevK8IglZgsBjJ/TERV3RR/E/0Dcr/xx2XoW2D7M55rShjEz58ETYTr3H4l7DTJoCftUecizm5ismDOfegUSoi98xue9teif7lShHs+3HN/lPnUiOowtwSve27nHRKPnpUqZgNwcfBpQJGI9L/aVFrJhhfxqgL+jnCcjTDeVESQ+RhXCZkXWdaTYrKPvjX8JWwwXIh5jpMTwi6BKWPrk=
before_install:
- curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
- sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu
  $(lsb_release -cs) stable"
- sudo apt-get update
- sudo apt-get -y -o Dpkg::Options::="--force-confnew" install docker-ce
jobs:
  include:
  - stage: Publish
    deploy:
      on:
        tags: true
      provider: script
      script: bash ./publish-dockers ${TRAVIS_TAG} ${SR_VERSION} ${CONFLUENT_VERSION}
        ${KAFKA_VERSION} ${LENSES_CLI_VERSION}
